```toc
```
# 14 가상화 기술
- VLAN 외에도 네트워크에서 다양한 가상화 기술을 사용
- 가상화 기술을 이용하면 리소스를 더 효율적으로 사용할 수 있고, 운영 비용이나 도입 비용을 줄일 수 있다
- 레거시 환경이 가진 문제점을 해결할 수도 있다.

- 그렇다면 가상화는 만능인가?
	- 당연히 아님
	- 적재적소에 사용하지 않는 가상화 기술은 오히려 인프라 구성에 좋지 않음

## 14.1 장비 가상화 기술이란?

- 가상화는 컴퓨터에서 컴퓨터 리소스의 추상화를 일컫는 광범위한 용어
- 사용자가 리소스와 상호작용하는 방식으로부터 컴퓨터 리소스의 물리적 특징을 갖추는 기술로 정의할 수 있다
- 덕분에 다중 논리 리소스 기능을 하는 것처럼 보이는 하나의 단일 물리적 리소스를 만들어 냄
- 혹은 단일 논리적 리소스처럼 보이는 여러 개의 물리적 리소스를 만들 수 있음

- 즉, 가상화는 리소스의 추상화
- 크게 두 개로 분리
	- 여러 개의 물리 장비를 하나의 논리 장비로 합치는 기술
	- 하나의 물리 장비를 여러 개의 논리 장비로 나누는 기술


- 여러 대의 물리 장비를 하나의 논리 장비로 구성하면 여러 개의 물리 박스 스위치를 묶어 한 대의 논리적 스위치로 만들 수 있음
- 두 가지 장점
	- 다수의 장비를 하나처럼 관리할 수 있어 운영자의 관리 부하를 줄임
	- 이중화 경로를 효율적으로 사용하고, 루프 문제를 제거할 수 있음
		- 루프 제거를 위해 STP를 사용하면 전체적인 안정성은 보장되지만 인프라를 효율적으로 사용할 수 없고 장애 발생 시의 Fail-over 시간도 다른 프로토콜보다 긴 편

![](files/Pasted%20image%2020250531174612.png)

- 위와 같은 구조로 사용하면 하나의 인터페이스가 Block됨

![](files/Pasted%20image%2020250531174627.png)
![](files/Pasted%20image%2020250531174633.png)

- 위와 같이 구성하면 모든 경로를 이용해서 통신 가능
- 또한 장애가 발생해도 별도의 긴 페일오버 시간이 필요하지 않음

- LACP, MC-LAG 등이 바로 위를 가능하게 해주는 가상화 기술

- 반대로 하나의 물리 장비를 여러 개의 논리 장비로 나누는 것도 가능
- VLAN 기술도 이 범주에 속하지만, 대표적인 가상화 기술은 VMware의 ESXi와 같이 하나의 물리 서버에 여러 개의 가상 서버를 구성하는 서버 가상화 기술
- 네트워크 장비에서도 서버 가상화와 같이 하나의 물리 장비를 여러 개의 논리 장비로 나눌 수 있음
- 가상화 서버처럼 하이퍼바이저를 이용한 가상화 형태로 나누거나 벤더 자체 솔루션을 통해 논리 장비로 나눈다

![](files/Pasted%20image%2020250531175058.png)

- 이렇게 가상화를 통해 나뉜 장비는 하나의 물리적 리소스를 공용으로 사용할 수도 있지만, 각 논리 장비마다 리소스를 독립적으로 할당해 서로 다른 논리 장비 간에는 리소스 사용을 침범하지 않게 해 논리 장비 간에 영향을 미치지 않도록 구성

![](files/Pasted%20image%2020250531175156.png)

- 여러 대로 가상화된 장비는 데이터 센터 내 장비를 영역별로 나눌 때 사용
- 데이터 센터 내에는 다양한 목적에 따라 영역을 구분해 네트워크 구성
- 각 네트워크 영역을 구성하기 위해 공통적으로 필요한 장비가 있음
	- 데이터 센터 내의 영역별로 물리 장비를 각각 구성할 수도 있고
	- 하나의 물리 장비를 논리적으로 가상화해 영역별로 배치해 사용할 수도 있음

- 하나의 물리 장비를 여러 개의 논리 장비로 나누어서 사용하면 다음과 같은 장점이 있다
	- 운용 시 관리 포인트 감소
		- 각 서비스 영역에 대해서는 개별적으로 동작하더라도 운영 면에서는 하나의 장비로 관리할 수 있어 관리 부하를 줄일 수 있음
	- 자원활용률 증가
		- 기존 유휴 자원을 다른 영역에서 나누어 사용할 수 있음
	- 도입비용과 운영비용 절감(Capex & Opex)
		- Capex(Capital Expenditures) : 자본적 지출
		- Opex(Operating Expenses) : 운영적 지출
		- 전체 장비 물량이 줄어 도입 비용, 운용 비용이 절감됨

![](files/Pasted%20image%2020250531175509.png)

- 장비 가상화를 이용해 이중화 구성을 해도 물리 장비 하나에서 동일한 역할을 논리적으로 나누어 사용하지는 않음
- 논리적으로 구성된 장비가 물리 리소스를 독립적으로 할당해서 사용해도, 물리 장비에 장애가 발생하면 모든 논리 서비스가 영향을 받으니 적절히 나눠서 구성해야 함

- 물리 장비를 여러 대의 논리 장비로 가상화할 때 몇 가지 유의사항이 있음
	- 여러 영역에 들어간 장비를 하나의 물리 장비에서 논리적으로 나누려면 각 영역이 요구하는 성능을 물리 장비에서 제공할 수 있어야 함
	- 특히 가상화를 하면 성능이 저하되는 부분이 있으니 더 신경써야 함
	- 방화벽이나 L4/L7 스위치와 같이 하나의 물리 장비에서 제공되는 인터페이스가 많지 않은 경우 인터페이스 수도 고려 필요

- 기능 면에서도 물리 장비에서 제공되는 기능이 논리적으로 가상화한 경우에도 정상적으로 제공되는지 확인 필요
- 어쨌든 위와 같은 문제가 없으면 CAPEX, OPEX 모두 효과적으로 줄일 수 있음
- 단, 무작정 시도하면 손실비용이 더 커질 수 있으므로 신중하게 해야 함

## 14.2 벤더별 장비 가상화 기술: 하나의 논리 장비로 만드는 가상화

### 14.2.1 시스코 시스템즈의 가상화 기술

#### 14.2.1.1 VSS

#### 14.2.1.2 StackWise/FlexStack

#### 14.2.1.3 FEX


### 14.2.2 주니퍼

#### 14.2.2.1 가상 섀시

#### 14.2.2.2 VCF

#### 14.2.2.3 주노스 퓨전

### 14.2.3 Extreme

### 14.2.4 HP 엔터프라이즈(HP Networking)



## 14.3 벤더별 장비 가상화 기술: 여러 개의 논리 장비로 만드는 가상화


### 14.3.1 시스코 시스템즈

### 14.3.2 시트릭스

### 14.3.3 F5

### 14.3.4 포티넷



