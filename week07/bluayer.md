# 통신을 도와주는 네트워크 주요 기술

## NAT/PAT

노트북, PC는 공유기를 통해서 / 스마트폰은 통신사 장비 어디선가 NAT을 수행

NAT = 1:1 매핑 변환 / PAT = 여러 IP를 하나의 IP로 변환

IPv4 to IPv6를 위한 AFT(Address Familiy Translation)도 NAT의 일종

(중략)

### PAT 동작 방식

PAT은 NAT 테이블에 포트도 가지고 있다는 점 정도가 다름

동시 사용자가 매우 많을 때는 PAT에서 사용하는 공인 IP 주소를 IP 하나가 아닌 Pool로 구성해야 함.

### SNAT & DNAT

SNAT(Source NAT) : 출발지 주소를 변경하는 NAT. 사설에서 공인으로 통신할 때 & 보안상 대외에 내부 IP 주소 숨길 때
DNAT(Destination NAT) : 도착지 주소를 변경하는 NAT. LB에서 많이 사용 & 대외망 구성시에도 사용

### 동적 NAT, 정적 NAT

동적 NATㅇ느 출발지 목적지 모두 정의된 것이 아니라 다수의 IP풀(w/ Range)에서 정해짐

NAT 테이블은 설정 시간동안 유지되고 일정 시간 동안 통신없으면 사라지기 때문에 동적 NAT은 고려가 필요

## DNS

내부 시스템 운영에도 DNS를 사용

### DNS 구조와 명명 규칙

루트부터 찾아나가고 128 계층까지 구성 가능

### DNS 동작 방식

DNS 서버 없이도 설정 가능 : hosts 파일 -> 항상 DNS 캐시에 저장됨

클라이언트는 한 번의 쿼리를 보내지만 이 요청을 받은 DNS 서버는 여러 단계로 쿼리를 상위 DNS 서버로 보내 정보를 획득

### 마스터/슬레이브

마스터 역할을 하는 서버에서는 자신이 가진 도메인 정보를 인가받지 않은 다른 DNS 서버가 복제해가지 못하도록 슬레이브를 지정해서 제한할 수 있음.

DNS 마스터, 슬레이브는 일반적으로 이중화하지 않음. SOA 레코드에 설정된 만료 시간(Expiry Time) 안에 마스터 서버를 복구하거나 슬레이브 서버를 마스터로 전환해야 함.

