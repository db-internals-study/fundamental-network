## 5장 라우터/L3 스위치: 3계층 장비
- Router? L3 스위치:
	- 스위치는 대표적인 2계층 장비이지만, 라우터처럼 3계층에서 동작하는 L3 장비도 많이 사용되고 있다.

### 5.1 라우터의 동작 방식과 역할
#### 5.1.1 경로 지정
#### 5.1.2. 브로드캐스트 컨트롤
- 스위치는 패킷의 도착지 주소를 모르면, 모든 포트에 플러딩한다.
- 라우터는 분명한 도착지 정보가 있을때만 통신을 허락한다.
- 라우터는 바로 연결되어 있는 네트워크 정보를 제외하고 경로 습득 설정을 하지 않으면 패킷을 포워딩할 수 없다.
#### 5.1.3. 프로토콜 변환
- 현대 네트워크는 이더넷으로 수렴되므로 줄었지만, 과거와 현재도 일부에서는 프로토콜 변환을 한다.

### 5.2. 경로 지정 - 라우팅/스위칭
- 경로 정보를 얻어 경로 정보를 정리하는 역할
- 정리된 경로 정보를 기반으로 패킷을 포워딩하는 역할

#### 5.2.1. 라우팅 동작과 라우팅 테이블
- 넥스트 홉을 지정할때 사용하는 일반적인 세가지 방법:
	- 다음 라우터의 IP를 지정하는 방법
	- 라우터의 나가는 인터페이스를 지정하는 방법
	- 라우터의 나가는 인터페이스와 다음 라우터의 IP를 동시에 지정하는 방법
- 라우팅 테이블에 저장되는 정보:
	- 목적지 주소
	- 넥스트 홉 IP 주소, 나가는 로컬 인터페이스 (optional)
- PBR(Policy-Based Routing):
	- 관리가 힘들어 널리 쓰이지는 않는다.
- 루프가 없는 3계층: TTL

#### 5.2.2. 라우팅(라우터가 경로 정보를 얻는 방법)
- 다이렉트 커넥티드
- 스태틱 라우팅
- 다이나믹 라우팅

#### 5.2.3. 스위칭 (라우터가 경로를 지정하는 방법)
- LPM (Longest Match Rule)
	- 가장 큰 부하.
	- 캐시를 둬서 계산값 재이용

### 5.3. 라우팅 설정 방법
- 다이렉트 커넥티드
- 스태틱 라우팅
- 다이나믹 라우팅
	- RIP, OSPF, IS-IS IGRP, EIGRP, BGP 같은 다양한 라우팅 프로토콜이 있지만
	- OSPF 와 BGP 프로토콜이 주로 사용된다.

- AS: Autonomous System
- IGP: AS 내에서 사용하는 라우팅 프로토콜
- EGP: AS 간 통신에 사용하는 라우팅 프로토콜
- 디스턴스 벡터: 인접한 라우터에서 경로 정보를 습득하는 라우팅 프로토콜
- 링크 스테이트: 라우터에 연결된 링크 상태를 서로 교환하고 각 네트워크 맵을 그리는 라우팅 프로토콜
